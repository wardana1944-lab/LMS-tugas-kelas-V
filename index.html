<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruang Belajar Pak Adit</title>
    <style>
        /* Tema Warna Biru Profesional */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0f172a; color: white; margin: 0; padding: 15px; text-align: center; }
        .card { background: white; color: #1e293b; padding: 25px; border-radius: 20px; max-width: 500px; margin: 15px auto; box-shadow: 0 10px 25px rgba(0,0,0,0.4); border-top: 6px solid #3b82f6; }
        h1 { color: #1e293b; margin-bottom: 5px; font-size: 24px; }
        .sub-title { color: #64748b; margin-bottom: 20px; font-size: 14px; }
        input, button { width: 100%; padding: 14px; margin: 8px 0; border-radius: 12px; border: 1px solid #e2e8f0; box-sizing: border-box; font-size: 15px; }
        button { background: #10b981; color: white; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { background: #059669; transform: translateY(-2px); }
        .btn-guru { background: #3b82f6; margin-top: 25px; font-size: 12px; opacity: 0.8; }
        
        /* Gaya Tabel */
        .rekap-container { margin-top: 25px; text-align: left; }
        table { width: 100%; border-collapse: collapse; background: #f8fafc; border-radius: 10px; overflow: hidden; }
        th, td { padding: 12px; border-bottom: 1px solid #e2e8f0; font-size: 14px; }
        th { background: #3b82f6; color: white; text-align: left; }
        .status { color: #10b981; font-weight: bold; display: flex; align-items: center; gap: 5px; }
    </style>
</head>
<body>

    <div class="card">
        <h1>Ruang Belajar Pak Adit</h1>
        <p class="sub-title">Selamat Belajar & Semangat Berkarya!</p>
        
        <div style="background: #eff6ff; padding: 15px; border-radius: 12px; margin-bottom: 20px;">
            <h2 id="topikTugas" style="margin: 0; color: #1e40af; font-size: 18px;">Memuat materi...</h2>
            <a id="linkTugas" href="#" target="_blank" style="display: inline-block; margin-top: 10px; color: #2563eb; font-weight: bold; text-decoration: none;">üëâ KLIK UNTUK BUKA MATERI</a>
        </div>
        
        <hr style="border: 0; border-top: 1px solid #e2e8f0; margin: 20px 0;">
        
        <h3>Kirim Tugas Kamu</h3>
        <input type="text" id="namaSiswa" placeholder="Ketik Nama Lengkap...">
        <input type="file" id="fileSiswa">
        <button onclick="kirimTugas()">KIRIM TUGAS SEKARANG</button>

        <div class="rekap-container">
            <h3 style="text-align: center;">Daftar Siswa Selesai</h3>
            <table>
                <thead>
                    <tr>
                        <th width="50">No</th>
                        <th>Nama Siswa</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="tabelSiswa" style="color: #334155;">
                    <tr><td colspan="3" style="text-align:center">Mengecek data...</td></tr>
                </tbody>
            </table>
        </div>

        <button class="btn-guru" onclick="menuGuru()">‚öôÔ∏è Pengaturan Materi (Guru)</button>
    </div>

    <script>
        // GANTI LINK DI BAWAH INI
        const scriptURL = 'TEMPEL_LINK_EXEC_BARU_BAPAK_DI_SINI';

        function muatData() {
            fetch(scriptURL)
            .then(r => r.json())
            .then(res => {
                document.getElementById('topikTugas').innerText = res.config.topik;
                document.getElementById('linkTugas').href = res.config.link;
                
                let h = "";
                if (res.data.length === 0) {
                    h = "<tr><td colspan='3' style='text-align:center'>Belum ada siswa yang mengumpul</td></tr>";
                } else {
                    res.data.forEach((r, i) => {
                        h += `<tr>
                            <td>${i+1}</td>
                            <td style="text-transform: capitalize;">${r[0].toLowerCase()}</td>
                            <td class="status">‚úÖ Selesai</td>
                        </tr>`;
                    });
                }
                document.getElementById('tabelSiswa').innerHTML = h;
            })
            .catch(err => {
                document.getElementById('tabelSiswa').innerHTML = "<tr><td colspan='3' style='text-align:center; color:red;'>Gagal memuat data</td></tr>";
            });
        }

        function kirimTugas() {
            const n = document.getElementById('namaSiswa').value;
            const f = document.getElementById('fileSiswa').files[0];
            if(!n || !f) return alert("Lengkapi Nama dan File ya!");

            const btn = event.target;
            btn.innerText = "Sabar, Sedang Mengirim...";
            btn.disabled = true;

            const r = new FileReader();
            r.readAsDataURL(f);
            r.onload = function() {
                fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({type: "upload", nama: n, filename: f.name, fileData: r.result}) })
                .then(() => { 
                    alert("Mantap! Tugas kamu sudah sampai ke Pak Adit."); 
                    location.reload(); 
                });
            };
        }

        function menuGuru() {
            if(prompt("Masukkan Password Guru:") === "1234") {
                const t = prompt("Apa Judul Materi Hari Ini?");
                const l = prompt("Tempel Link Materi (Canva/Lainnya):");
                if(t && l) {
                    fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({type: "updateSettings", topik: t, link: l}) })
                    .then(() => { alert("Materi Ruang Belajar Berhasil Diupdate!"); location.reload(); });
                }
            } else { alert("Maaf, Password Salah!"); }
        }

        muatData();
    </script>
</body>
</html>
