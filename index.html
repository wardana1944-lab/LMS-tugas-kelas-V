<!doctype html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SD N Pengkol â€“ CBT Online</title>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#0ea5e9;
  --bg:#020617;
  --glass:rgba(255,255,255,.08);
}
*{box-sizing:border-box;font-family:'Plus Jakarta Sans',sans-serif}
body{margin:0;background:radial-gradient(circle at top,#020617,#020617);color:#fff;padding:15px}
.container{max-width:900px;margin:auto}

/* HEADER */
.header-card{
  display:flex;justify-content:space-between;align-items:center;
  padding:20px;border-radius:20px;
  background:linear-gradient(135deg,#020617,#020617);
  box-shadow:0 15px 40px rgba(0,0,0,.45);
}
.sch-info h1{margin:0;font-size:1rem;color:var(--primary)}
.sch-info p{font-size:.65rem;opacity:.6}
.guru-profile{display:flex;gap:10px;align-items:center;cursor:pointer}
.guru-profile img{width:40px;height:40px;border-radius:50%;border:2px solid var(--primary)}
.guru-name{text-align:right;font-size:.7rem;font-weight:700}

/* SISWA GRID */
.grid-siswa{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:14px;margin-top:25px
}
.card-siswa{
  background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.03));
  border-radius:16px;padding:20px 6px;text-align:center;
  cursor:pointer;transition:.25s;
  box-shadow:0 10px 30px rgba(0,0,0,.35)
}
.card-siswa:hover{
  transform:translateY(-4px);
  box-shadow:0 20px 45px rgba(14,165,233,.35)
}
.card-siswa span{font-size:2.7rem}
.card-siswa p{font-size:.75rem;font-weight:700}

/* PANEL */
.panel{
  display:none;position:fixed;inset:0;
  background:#f8fafc;color:#1e293b;
  z-index:999;padding:15px;overflow:auto
}

/* CBT */
.cbt-wrapper{
  display:grid;
  grid-template-columns:90px 1fr;
  gap:15px;margin-top:15px
}
.cbt-nomor{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:8px
}
.no-soal{
  background:#e5e7eb;
  border-radius:12px;
  padding:12px 0;
  text-align:center;
  font-weight:800;
  cursor:pointer;
  transition:.2s
}
.no-soal.active{background:var(--primary);color:#fff}
.no-soal.done{background:#10b981;color:#fff}

.cbt-soal{
  background:#fff;
  border-radius:18px;
  padding:25px;
  box-shadow:0 10px 30px rgba(0,0,0,.15)
}

select{
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:12px;
  border:1px solid #cbd5e1;
  font-size:.9rem
}

/* BUTTON */
.btn{
  margin-top:18px;
  padding:15px;
  border-radius:14px;
  border:none;
  font-weight:800;
  cursor:pointer;
  width:100%
}
.btn-blue{
  background:linear-gradient(135deg,#0ea5e9,#0284c7);
  color:#fff
}
.btn-back{background:#e5e7eb}
</style>
</head>

<body>
<div class="container">

<!-- HEADER -->
<div class="header-card">
  <div class="sch-info">
    <h1>SD N Pengkol</h1>
    <p>CBT Online Kelas V</p>
  </div>
  <div class="guru-profile" onclick="modalLogin.style.display='flex'">
    <div class="guru-name">
      <p>Aditya W. W., S.Pd</p>
      <p style="font-size:.55rem;opacity:.6">Guru Kelas</p>
    </div>
    <img src="https://ui-avatars.com/api/?name=Aditya+WW&background=0ea5e9&color=fff">
  </div>
</div>

<!-- SISWA -->
<div class="grid-siswa" id="gridSiswa"></div>
</div>

<!-- PANEL KERJA -->
<div id="panelKerja" class="panel">
  <div class="container" style="max-width:700px">
    <h3 id="namaSiswaHi"></h3>
    <p id="materiHi" style="font-weight:800;color:#0ea5e9"></p>

    <div class="cbt-wrapper">
      <div class="cbt-nomor" id="cbtNomor"></div>
      <div class="cbt-soal" id="areaSoalSiswa"></div>
    </div>

    <button class="btn btn-blue" onclick="kirimJawaban()">KIRIM JAWABAN</button>
    <button class="btn btn-back" onclick="closeView('panelKerja')">BATAL</button>
  </div>
</div>

<!-- LOGIN GURU -->
<div id="modalLogin" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:1000;align-items:center;justify-content:center">
  <div style="background:#020617;padding:25px;border-radius:20px;width:300px">
    <h4 style="text-align:center;color:#fff">Login Guru</h4>
    <input id="passGuru" type="password" placeholder="Sandi" style="width:100%;padding:12px;border-radius:12px">
    <button class="btn btn-blue" onclick="login()">MASUK</button>
    <button class="btn btn-back" onclick="modalLogin.style.display='none'">BATAL</button>
  </div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbzKSeF0P2w2x1sszm09pLl1lEzApYHH9xbG1UISa5SoiDWfrle5L4iF7jbh8LtdqgyHvA/exec";

/* 15 SISWA UTUH */
const SISWA=[
{n:"Alvaro Adnan Aji Pambudi",i:"ðŸ‘¦"},
{n:"Anantha Yudha Diztira",i:"ðŸ‘¦"},
{n:"Arifah Yhuan Nur Azizah",i:"ðŸ‘§"},
{n:"Aurelia Gieni Lindria Putri",i:"ðŸ‘§"},
{n:"Dhafitha Nizza Nur Azizah",i:"ðŸ‘§"},
{n:"Dhian Rahmawati",i:"ðŸ‘§"},
{n:"Dimas Rasyid Faristia",i:"ðŸ‘¦"},
{n:"Erfin Denu Setiawan",i:"ðŸ‘¦"},
{n:"Marsya Anindya Kiera",i:"ðŸ‘§"},
{n:"Mikayla Ayuningtyas",i:"ðŸ‘§"},
{n:"Muhammad Ozil Ramadhan",i:"ðŸ‘¦"},
{n:"Rhevan Nabil Yudanta",i:"ðŸ‘¦"},
{n:"Ridho Wicaksono",i:"ðŸ‘¦"},
{n:"Rizky Syam Dani",i:"ðŸ‘¦"},
{n:"Tanca Al Verosa",i:"ðŸ‘¦"}
];

let dataWeb,userSekarang;
let jawaban=[],soalAktif=0;

window.onload=async()=>{
  const grid=document.getElementById("gridSiswa");
  SISWA.forEach(s=>{
    grid.innerHTML+=`
      <div class="card-siswa" onclick="bukaTugas('${s.n}')">
        <span>${s.i}</span><p>${s.n}</p>
      </div>`;
  });
  const r=await fetch(API+"?action=getAllData");
  dataWeb=await r.json();
};

function bukaTugas(nama){
  userSekarang=nama;
  document.getElementById("namaSiswaHi").innerText="Halo, "+nama;
  document.getElementById("materiHi").innerText="Materi: "+dataWeb.tugas.judul;

  jawaban=new Array(dataWeb.tugas.soal.length).fill("");
  const nomor=document.getElementById("cbtNomor");
  nomor.innerHTML="";

  dataWeb.tugas.soal.forEach((_,i)=>{
    nomor.innerHTML+=`<div class="no-soal" onclick="bukaSoal(${i})">${i+1}</div>`;
  });

  bukaSoal(0);
  openView("panelKerja");
}

function bukaSoal(i){
  soalAktif=i;
  document.querySelectorAll(".no-soal").forEach((n,idx)=>{
    n.classList.toggle("active",idx===i);
    n.classList.toggle("done",jawaban[idx]);
  });
  const s=dataWeb.tugas.soal[i];
  document.getElementById("areaSoalSiswa").innerHTML=`
    <b>${i+1}. ${s.tanya}</b>
    <select onchange="jawaban[${i}]=this.value">
      <option value="">-- Pilih Jawaban --</option>
      <option value="A">A. ${s.opsi[0]}</option>
      <option value="B">B. ${s.opsi[1]}</option>
      <option value="C">C. ${s.opsi[2]}</option>
      <option value="D">D. ${s.opsi[3]}</option>
    </select>`;
}

async function kirimJawaban(){
  let benar=0;
  dataWeb.tugas.soal.forEach((s,i)=>{
    if(jawaban[i]===s.kunci) benar++;
  });
  alert("Jawaban terkirim!\nNilai: "+Math.round(benar/dataWeb.tugas.soal.length*100));
  location.reload();
}

function openView(id){document.getElementById(id).style.display="block"}
function closeView(id){document.getElementById(id).style.display="none"}
function login(){
  if(passGuru.value==="guru123"){modalLogin.style.display="none"}
  else alert("Sandi salah!");
}
</script>
</body>
</html>
