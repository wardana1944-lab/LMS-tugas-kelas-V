<!doctype html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>CBT SD N Pengkol</title>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Plus Jakarta Sans',sans-serif}
body{margin:0;background:#020617;color:#fff}
.container{max-width:900px;margin:auto;padding:15px}

/* HP FULL CBT */
@media(max-width:768px){
 body{overflow:hidden}
 .container{padding:8px}
}

/* HEADER */
.header{display:flex;justify-content:space-between;align-items:center;
background:#020617;padding:15px;border-radius:16px;
box-shadow:0 15px 40px rgba(0,0,0,.45)}
.header h1{font-size:.9rem;color:#0ea5e9;margin:0}
.header p{font-size:.6rem;opacity:.6;margin:0}

/* SISWA */
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:20px}
.card{background:linear-gradient(180deg,#ffffff22,#ffffff05);
border-radius:16px;text-align:center;padding:18px 6px;
cursor:pointer}
.card span{font-size:2.5rem}
.card p{font-size:.7rem;font-weight:700}

/* PANEL */
.panel{display:none;position:fixed;inset:0;background:#f8fafc;color:#020617;z-index:99;overflow:auto}

/* CBT */
.cbt{display:grid;grid-template-columns:80px 1fr;gap:12px}
.numbers{display:grid;grid-template-columns:repeat(2,1fr);gap:6px}
.no{background:#e5e7eb;border-radius:10px;padding:10px;text-align:center;font-weight:800}
.no.active{background:#0ea5e9;color:#fff}
.no.done{background:#10b981;color:#fff}
.soal{background:#fff;border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.2)}

select{width:100%;padding:12px;border-radius:12px;margin-top:15px}

/* BUTTON */
.btn{width:100%;padding:15px;border:none;border-radius:14px;font-weight:800;margin-top:12px}
.blue{background:#0ea5e9;color:#fff}
.red{background:#ef4444;color:#fff}
.gray{background:#e5e7eb}
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <div>
      <h1>SD N Pengkol</h1>
      <p>CBT Online Kelas V</p>
    </div>
    <div onclick="loginBox.style.display='flex'" style="cursor:pointer;font-size:.7rem">
      üë®‚Äçüè´ Guru
    </div>
  </div>

  <div class="grid" id="gridSiswa"></div>
</div>

<!-- PANEL CBT -->
<div id="panelCBT" class="panel">
  <div class="container">
    <h3 id="hiSiswa"></h3>
    <b id="judul"></b>

    <div class="cbt" style="margin-top:15px">
      <div class="numbers" id="nums"></div>
      <div class="soal" id="soal"></div>
    </div>

    <button class="btn blue" onclick="submitUjian()">KIRIM JAWABAN</button>
  </div>
</div>

<!-- PANEL GURU -->
<div id="panelGuru" class="panel">
  <div class="container">
    <h2 style="text-align:center">REKAP NILAI REAL-TIME</h2>
    <div id="rekap"></div>
    <button class="btn red" onclick="logout()">LOGOUT</button>
  </div>
</div>

<!-- LOGIN -->
<div id="loginBox" style="display:none;position:fixed;inset:0;background:#000a;z-index:999;align-items:center;justify-content:center">
  <div style="background:#020617;padding:25px;border-radius:20px;width:300px">
    <input id="pass" type="password" placeholder="Password Guru">
    <button class="btn blue" onclick="login()">MASUK</button>
  </div>
</div>

<script>
const siswa=[
"Alvaro Adnan Aji Pambudi","Anantha Yudha Diztira","Arifah Yhuan Nur Azizah",
"Aurelia Gieni Lindria Putri","Dhafitha Nizza Nur Azizah","Dhian Rahmawati",
"Dimas Rasyid Faristia","Erfin Denu Setiawan","Marsya Anindya Kiera",
"Mikayla Ayuningtyas","Muhammad Ozil Ramadhan","Rhevan Nabil Yudanta",
"Ridho Wicaksono","Rizky Syam Dani","Tanca Al Verosa"
];

const soalData={
judul:"PTS Matematika",
soal:[
{q:"5 √ó 6 =",o:["25","30","35","40"],k:"B"},
{q:"10 + 15 =",o:["20","25","30","35"],k:"B"},
{q:"12 : 4 =",o:["2","3","4","5"],k:"B"}
]
};

let jawaban=[],aktif=0,nama="",rekap=[];

/* LOAD SISWA */
const grid=document.getElementById("gridSiswa");
siswa.forEach(s=>{
 grid.innerHTML+=`<div class="card" onclick="mulai('${s}')"><span>üë¶</span><p>${s}</p></div>`;
});

/* MULAI */
function mulai(n){
 nama=n;
 jawaban=new Array(soalData.soal.length).fill("");
 document.getElementById("hiSiswa").innerText="Halo, "+n;
 document.getElementById("judul").innerText=soalData.judul;
 buatNomor();
 buka(0);
 panelCBT.style.display="block";
 requestFullscreen();
}

/* CBT */
function buatNomor(){
 nums.innerHTML="";
 soalData.soal.forEach((_,i)=>{
  nums.innerHTML+=`<div class="no" onclick="buka(${i})">${i+1}</div>`;
 });
}
function buka(i){
 aktif=i;
 document.querySelectorAll(".no").forEach((n,x)=>{
  n.className="no"+(x==i?" active":"")+(jawaban[x]?" done":"");
 });
 const s=soalData.soal[i];
 soal.innerHTML=`
 <b>${i+1}. ${s.q}</b>
 <select onchange="jawaban[${i}]=this.value">
  <option value="">Pilih</option>
  <option value="A">A. ${s.o[0]}</option>
  <option value="B">B. ${s.o[1]}</option>
  <option value="C">C. ${s.o[2]}</option>
  <option value="D">D. ${s.o[3]}</option>
 </select>`;
}

/* SUBMIT */
function submitUjian(auto=false){
 let benar=0;
 soalData.soal.forEach((s,i)=>{if(jawaban[i]==s.k) benar++;});
 let nilai=Math.round(benar/soalData.soal.length*100);
 rekap.push({nama,nilai});
 alert(auto?"KELUAR TAB! Jawaban otomatis dikirim":"Nilai: "+nilai);
 location.reload();
}

/* ANTI CURANG */
document.addEventListener("visibilitychange",()=>{
 if(document.hidden) submitUjian(true);
});
window.onbeforeunload=()=> "Ujian sedang berlangsung";

/* GURU */
function login(){
 if(pass.value==="guru123"){
  loginBox.style.display="none";
  panelGuru.style.display="block";
  tampilRekap();
 }else alert("Password salah");
}
function tampilRekap(){
 rekap.innerHTML="";
 rekap.forEach(r=>{
  rekap.innerHTML+=`<p><b>${r.nama}</b> ‚Äì ${r.nilai}</p>`;
 });
}
function logout(){location.reload()}

/* FULLSCREEN */
function requestFullscreen(){
 const el=document.documentElement;
 if(el.requestFullscreen) el.requestFullscreen();
}
</script>
</body>
</html>
